{% extends 'aluno/base.html' %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-3">
        {% if form.instance.pk %}
            Editar Aluno
        {% else %}
            Novo Aluno
        {% endif %}
    </h2>

    <form method="post">
        {% csrf_token %}

        <!-- Informações Pessoais -->
        <fieldset class="card p-3 mb-3">
            <legend class="h6 text-primary">Informações Pessoais</legend>
            <div class="row">
                <div class="col-md-6">
                    <label for="id_nome_completo" class="form-label">Nome Completo *</label>
                    {{ form.nome_completo }}
                    {% for error in form.nome_completo.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-3">
                    <label for="id_data_nascimento" class="form-label">Data de Nascimento *</label>
                    {{ form.data_nascimento }}
                    {% for error in form.data_nascimento.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-3">
                    <label for="id_sexo" class="form-label">Sexo *</label>
                    {{ form.sexo }}
                    {% for error in form.sexo.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-4">
                    <label for="id_cpf" class="form-label">CPF *</label>
                    {{ form.cpf }}
                    {% for error in form.cpf.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-4">
                    <label for="id_rg" class="form-label">RG *</label>
                    {{ form.rg }}
                    {% for error in form.rg.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
            </div>
        </fieldset>

        <!-- Informações de Contato -->
        <fieldset class="card p-3 mb-3">
            <legend class="h6 text-primary">Informações de Contato</legend>
            <div class="row">
                <div class="col-md-6">
                    <label for="id_email" class="form-label">E-mail *</label>
                    {{ form.email }}
                    {% for error in form.email.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-3">
                    <label for="id_telefone" class="form-label">Telefone *</label>
                    {{ form.telefone }}
                    {% for error in form.telefone.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-3">
                    <label for="id_telefone_emergencia" class="form-label">Telefone Emergência</label>
                    {{ form.telefone_emergencia }}
                    {% for error in form.telefone_emergencia.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
            </div>
        </fieldset>

        <!-- Endereço -->
        <fieldset class="card p-3 mb-3">
            <legend class="h6 text-primary">Endereço</legend>
            <div class="row">
                <div class="col-md-3">
                    <label for="id_cep" class="form-label">CEP *</label>
                    {{ form.cep }}
                    {% for error in form.cep.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-6">
                    <label for="id_endereco" class="form-label">Endereço *</label>
                    {{ form.endereco }}
                    {% for error in form.endereco.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-3">
                    <label for="id_numero" class="form-label">Número *</label>
                    {{ form.numero }}
                    {% for error in form.numero.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-4">
                    <label for="id_complemento" class="form-label">Complemento</label>
                    {{ form.complemento }}
                    {% for error in form.complemento.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-4">
                    <label for="id_bairro" class="form-label">Bairro *</label>
                    {{ form.bairro }}
                    {% for error in form.bairro.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-3">
                    <label for="id_cidade" class="form-label">Cidade *</label>
                    {{ form.cidade }}
                    {% for error in form.cidade.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-1">
                    <label for="id_uf" class="form-label">UF *</label>
                    {{ form.uf }}
                    {% for error in form.uf.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
            </div>
        </fieldset>

        <!-- Informações Acadêmicas -->
        <fieldset class="card p-3 mb-3">
            <legend class="h6 text-primary">Informações Acadêmicas</legend>
            <div class="row">
                <div class="col-md-4">
                    <label for="id_numero_matricula" class="form-label">Número de Matrícula *</label>
                    {{ form.numero_matricula }}
                    {% for error in form.numero_matricula.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-4">
                    <label for="id_curso" class="form-label">Curso *</label>
                    {{ form.curso }}
                    {% for error in form.curso.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-2">
                    <label for="id_ano" class="form-label">Série/Ano *</label>
                    {{ form.ano }}
                    {% for error in form.ano.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="col-md-2">
                    <label for="id_turno" class="form-label">Turno *</label>
                    {{ form.turno }}
                    {% for error in form.turno.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-12">
                    <label for="id_observacoes" class="form-label">Observações</label>
                    {{ form.observacoes }}
                    {% for error in form.observacoes.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="row mt-2">
                    <div class="col-md-3">
                        <label for="id_status" class="form-label">Status *</label>
                        {{ form.status }}
                        {% for error in form.status.errors %}
                            <div class="text-danger small">{{ error }}</div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </fieldset>

        <div class="d-flex gap-2 mt-3">
            <button type="reset" class="btn btn-secondary">Limpar</button>
            <button type="submit" class="btn btn-primary">
                {% if form.instance.pk %}Salvar Alterações{% else %}Cadastrar Aluno{% endif %}
            </button>
            <a href="{% url 'alunos' %}" class="btn btn-outline-secondary">Cancelar</a>
        </div>
    </form>
</div>

<!-- jQuery + jQuery Mask -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script>
    $(document).ready(function(){
        $("#id_cpf").mask("000.000.000-00");
        $("#id_rg").mask("0000000000-0");
        $("#id_telefone").mask("(00) 0000-0000");
        $("#id_telefone_emergencia").mask("(00) 0000-0000");
        $("#id_cep").mask("00000-000");
    });
</script>
{% endblock %}
